import{r as h,c as L,o as c,a as d,b as x,d as s,w as k,v as B,F as V,e as M,t as v,n as S,u as w,f as C,g as $,h as H,i as U,j as R,k as z,l as F}from"./index-5b2b3b07.js";import{f as p,L as D}from"./vue3-datepicker-0bbd936d.js";const N={class:"card-list"},P={key:0,class:"is-flex is-justify-content-center is-align-items-center my-6"},E=s("div",{class:"loader"},null,-1),T=[E],O={key:1,class:"is-flex is-justify-content-center is-align-items-center my-6"},J=s("p",{class:"is-error"}," Sorry there was an error. You may find more details in your Javascript console, or in Showergel's logs ",-1),Y=[J],q={key:2,class:"list-container"},A={class:"field"},G=s("label",{class:"label",for:"filter"},"Filter by artist or song name",-1),I={class:"control"},K={class:"subtitle is-3 day has-background-link has-text-light p-2 has-text-centered"},Q={class:"titles"},W={class:"media-left"},X={class:"block pt-1"},Z={class:"media-content columns"},ss={class:"content column"},es={class:"mb-0"},ts={class:"small-caps subtitle is-4 is-capitalized"},ls={class:"is-size-5 has-text-grey is-italic mb-0"},os={class:"has-text-grey mb-0"},as={class:"content column"},is={class:"tag is-warning"},ns={class:"pt-2 is-size-6 has-text-grey"},cs=s("div",{class:"media-right"},null,-1),ds={__name:"CardList",props:{results:Object,loading:{type:Boolean,default:!0},error:{type:Boolean,default:!1}},setup(m){const a=m,l=h(""),f=L(()=>{const r={};return a.results&&typeof a.results=="object"&&Object.keys(a.results).forEach(u=>{const o=a.results[u].filter(i=>l.value?String(i.artist).includes(l.value)||String(i.title).includes(l.value):!0);r[u]=o}),r});return(r,u)=>(c(),d("div",N,[m.loading?(c(),d("div",P,T)):x("",!0),!m.loading&&m.error?(c(),d("div",O,Y)):x("",!0),!m.loading&&!m.error?(c(),d("div",q,[s("div",A,[G,s("div",I,[k(s("input",{id:"filter",class:"input",type:"text","onUpdate:modelValue":u[0]||(u[0]=o=>l.value=o)},null,512),[[B,l.value]])])]),(c(!0),d(V,null,M(f.value,(o,i)=>(c(),d("div",{key:i},[s("p",K,v(i),1),s("div",Q,[(c(!0),d(V,null,M(o,(t,_)=>(c(),d("div",{key:t.on_air,class:S(`media mt-0 px-4 ${_%2===0?"has-background-light":""}`)},[s("div",W,[s("div",X,v(w(p)(new Date(t.on_air),"HH:mm:ss")),1)]),s("div",Z,[s("div",ss,[s("p",es,[s("strong",ts,v(t.artist),1)]),s("p",ls,v(t.title),1),s("p",os,v(t.album)+" - "+v(t.year),1)]),s("div",as,[s("div",is,v(t.source),1),s("p",ns,v(t.initial_uri),1)])]),cs],2))),128))])]))),128))])):x("",!0)]))}};const rs={id:"playout_history",class:"content my-4"},us=s("h1",null,"Playout History",-1),_s={class:"columns"},vs={class:"field column"},hs=s("label",{class:"label",for:"start"},"From",-1),ms={class:"control"},fs={class:"field column"},ys=s("label",{class:"label",for:"end"},"To",-1),ps={class:"control"},gs={class:"is-flex is-justify-content-space-between"},bs={class:"field"},xs=s("label",{class:"label",for:"limit"},"Max. results:",-1),$s={class:"control"},ks={class:"select"},ws=s("option",null,"10",-1),Vs=s("option",null,"100",-1),Ms=s("option",null,"1000",-1),Ds=[ws,Vs,Ms],Ss={class:"field is-flex is-align-self-flex-end"},js={class:"checkbox",for:"chronological"},Ls={class:"field is-align-self-flex-end"},Hs={__name:"PlayoutHistory",setup(m){const a=h(""),l=h(""),f=h("10"),r=h(""),u=h({}),o=h(!0),i=h(!1);function t(){o.value=!0,i.value=!1;let _=new URLSearchParams;f.value&&_.append("limit",f.value),a.value&&_.append("start",p(new Date(a.value),"yyyy-MM-dd")),l.value&&_.append("end",p(new Date(l.value),"yyyy-MM-dd")),r.value&&_.append("chronological",r.value),F.get("/metadata_log",{params:_}).then(e=>{const j=e.data.metadata_log.reduce((y,g)=>{const b=p(new Date(g.on_air),"dd/MM/yyyy");return y[b]?y[b].push(g):y[b]=[g],y},{});u.value=j,o.value=!1}).catch(e=>{i.value=!0,console.log(e)})}return C(t),(_,e)=>(c(),d("div",rs,[us,s("form",{onSubmit:e[4]||(e[4]=z(n=>t(),["prevent"])),class:"box"},[s("div",_s,[s("div",vs,[hs,s("div",ms,[$(w(D),{class:"input",placeholder:"2021-01-01",modelValue:a.value,"onUpdate:modelValue":e[0]||(e[0]=n=>a.value=n)},null,8,["modelValue"])])]),s("div",fs,[ys,s("div",ps,[$(w(D),{class:"input",placeholder:"2021-01-01",modelValue:l.value,"onUpdate:modelValue":e[1]||(e[1]=n=>l.value=n)},null,8,["modelValue"])])])]),s("div",gs,[s("div",bs,[xs,s("div",$s,[s("div",ks,[k(s("select",{"onUpdate:modelValue":e[2]||(e[2]=n=>f.value=n),id:"limit"},Ds,512),[[H,f.value]])])])]),s("div",Ss,[s("label",js,[k(s("input",{class:"checkbox",type:"checkbox",id:"chronological","onUpdate:modelValue":e[3]||(e[3]=n=>r.value=n),"true-value":"yes","false-value":""},null,512),[[U,r.value]]),R(" Chronologically ")])]),s("div",Ls,[s("button",{class:S(`button is-link ${o.value?"is-loading":""}`)}," Search ",2)])])],32),$(ds,{results:u.value,loading:o.value,error:i.value},null,8,["results","loading","error"])]))}};export{Hs as default};

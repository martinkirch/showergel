(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["users"],{"38d3":function(e,t,s){"use strict";t["a"]={error_handler:function(e){e.response&&e.response.data.message?this.error(e.response.data.message):console.log(e)},error:function(e){alert(e)},success_handler:function(e){return function(){alert(e)}},success:function(e){alert(e)}}},"92a9":function(e,t,s){"use strict";s("f001")},ed81:function(e,t,s){"use strict";s.r(t);var a=s("7a23");Object(a["w"])("data-v-65266e4f");var n={id:"playout_history",class:"content"},r=Object(a["g"])("h1",null,"Users",-1),c=Object(a["g"])("p",null,[Object(a["h"])(" From here you can edit usernames and passwords that will be allowed to stream, if "),Object(a["g"])("code",null,"harbor"),Object(a["h"])(" authentication "),Object(a["g"])("a",{href:"https://showergel.readthedocs.io/en/latest/liquidsoap.html#authenticating-users-on-harbor",target:"_blank"}," is set up "),Object(a["h"])(". ")],-1),o=Object(a["g"])("div",{class:"modal-background"},null,-1),d={class:"modal-card"},l={class:"modal-card-head"},i=Object(a["g"])("p",{class:"modal-card-title"},"Create user account",-1),u={class:"modal-card-body"},b=Object(a["g"])("p",null," Avoid special characters (even spaces) in usernames. ",-1),h={class:"field"},O=Object(a["g"])("label",{class:"label",for:"username"},"Username",-1),j={class:"control"},g={class:"field"},f=Object(a["g"])("label",{class:"label",for:"password"},"Pass phrase",-1),p={class:"control"},m={class:"field"},w=Object(a["g"])("label",{class:"label",for:"password_confirmation"},"Confirm pass phrase",-1),v={class:"control"},U={class:"help is-danger"},P={class:"modal-card-foot"},C=Object(a["g"])("button",{class:"button is-success",type:"submit",form:"addUser"},"Create account",-1),_={class:"table-container"},k={class:"table is-striped"},A=Object(a["g"])("thead",null,[Object(a["g"])("tr",null,[Object(a["g"])("th",null,"Username"),Object(a["g"])("th",null,"Created"),Object(a["g"])("th",null,"Modified"),Object(a["g"])("th",null,"Actions")])],-1),y=["onClick"],I=Object(a["g"])("i",{class:"mdi mdi-lock-reset"},null,-1),M=[I],N=["onClick"],R=Object(a["g"])("i",{class:"mdi mdi-account-off"},null,-1),E=[R];function J(e,t,s,I,R,J){return Object(a["t"])(),Object(a["f"])("div",n,[r,c,Object(a["g"])("button",{class:"button block is-primary is-rounded",onClick:t[0]||(t[0]=function(e){return R.showUserAdd=!0})},"Add"),Object(a["g"])("div",{class:Object(a["p"])(["modal",{"is-active":R.showUserAdd}])},[o,Object(a["g"])("div",d,[Object(a["g"])("header",l,[i,Object(a["g"])("button",{class:"delete","aria-label":"close",onClick:t[1]||(t[1]=function(e){return J.resetAdd()})})]),Object(a["g"])("section",u,[Object(a["g"])("form",{onSubmit:t[5]||(t[5]=Object(a["O"])((function(e){return J.addUser()}),["prevent"])),class:"box",id:"addUser"},[b,Object(a["g"])("div",h,[O,Object(a["g"])("div",j,[Object(a["N"])(Object(a["g"])("input",{class:"input",id:"username","onUpdate:modelValue":t[2]||(t[2]=function(e){return R.addUsername=e})},null,512),[[a["I"],R.addUsername]])])]),Object(a["g"])("div",g,[f,Object(a["g"])("div",p,[Object(a["N"])(Object(a["g"])("input",{class:"input",type:"password",id:"password","onUpdate:modelValue":t[3]||(t[3]=function(e){return R.addPassword=e})},null,512),[[a["I"],R.addPassword]])])]),Object(a["g"])("div",m,[w,Object(a["g"])("div",v,[Object(a["N"])(Object(a["g"])("input",{class:"input",type:"password",id:"password_confirmation","onUpdate:modelValue":t[4]||(t[4]=function(e){return R.addPasswordConfirmation=e})},null,512),[[a["I"],R.addPasswordConfirmation]])]),Object(a["N"])(Object(a["g"])("p",U," Pass phrases don't match ",512),[[a["J"],J.addPasswordsMismatch]])])],32)]),Object(a["g"])("footer",P,[C,Object(a["g"])("button",{class:"button",onClick:t[6]||(t[6]=function(e){return J.resetAdd()})},"Cancel")])])],2),Object(a["g"])("div",_,[Object(a["g"])("table",k,[A,Object(a["g"])("tbody",null,[(Object(a["t"])(!0),Object(a["f"])(a["a"],null,Object(a["z"])(R.users,(function(e){return Object(a["t"])(),Object(a["f"])("tr",{key:e.username},[Object(a["g"])("td",null,Object(a["E"])(e.username),1),Object(a["g"])("td",null,Object(a["E"])(new Date(e.created_at).toLocaleString()),1),Object(a["g"])("td",null,Object(a["E"])(new Date(e.modified_at).toLocaleString()),1),Object(a["g"])("td",null,[Object(a["g"])("button",{class:"button is-warning icon",onClick:function(t){return J.changePassword(e.username)},title:"Change pass phrase"},M,8,y),Object(a["g"])("button",{class:"button is-danger icon",onClick:function(t){return J.deleteUser(e.username)},title:"Remove user account"},E,8,N)])])})),128))])])])])}Object(a["u"])();var S=s("ba6a"),V=s("38d3"),D={data:function(){return{addUsername:"",addPassword:"",addPasswordConfirmation:"",showUserAdd:!1,users:[]}},computed:{addPasswordsMismatch:function(){return this.addPassword!=this.addPasswordConfirmation}},methods:{getUsers:function(){S["a"].get("/users").then(this.onResults).catch(V["a"].error_handler)},onResults:function(e){this.users=e.data.users},resetAdd:function(){this.showUserAdd=!1,this.addUsername="",this.addPassword="",this.addPasswordConfirmation=""},addUser:function(){this.addPasswordsMismatch||S["a"].put("/users",{username:this.addUsername,password:this.addPassword}).then(this.resetAdd).then(this.getUsers).catch(V["a"].error_handler)},changePassword:function(e){var t=prompt("Please enter a new pass phrase for ".concat(e));if(t){var s=prompt("Please confirm ".concat(e,"'s new pass phrase"));s&&(s==t?S["a"].post("/users/".concat(e),{password:t}).then(V["a"].success_handler("Pass phrase updated")).catch(V["a"].error_handler):V["a"].error("Pass phrases don't match !"))}},deleteUser:function(e){confirm("Really remove ".concat(e,"'s account ? All related data will be removed too."))&&S["a"].delete("/users/"+e).then(this.getUsers).catch(V["a"].error_handler)}},mounted:function(){this.getUsers()}};s("92a9");D.render=J,D.__scopeId="data-v-65266e4f";t["default"]=D},f001:function(e,t,s){}}]);
//# sourceMappingURL=users.7b640fc2.js.map
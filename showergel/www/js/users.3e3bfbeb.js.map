{"version":3,"sources":["webpack:///./src/notifications.js","webpack:///./src/views/Users.vue?95bd","webpack:///./src/views/Users.vue","webpack:///./src/views/Users.vue?b2ef"],"names":["error_handler","error","response","data","message","this","console","log","alert","success_handler","success","id","class","href","target","for","type","form","showUserAdd","aria-label","resetAdd","addUser","addUsername","addPassword","addPasswordConfirmation","addPasswordsMismatch","users","user","key","username","Date","created_at","toLocaleString","modified_at","changePassword","title","deleteUser","computed","methods","getUsers","http","get","then","onResults","catch","notifications","put","password","pass","prompt","post","confirm","delete","mounted","render","__scopeId"],"mappings":"yGAAe,QACbA,cAAe,SAAUC,GACnBA,EAAMC,UAAYD,EAAMC,SAASC,KAAKC,QACxCC,KAAKJ,MAAMA,EAAMC,SAASC,KAAKC,SAE/BE,QAAQC,IAAIN,IAGhBA,MAAO,SAAUG,GACfI,MAAMJ,IAERK,gBAAiB,SAAUL,GACzB,OAAO,WACLI,MAAMJ,KAGVM,QAAS,SAAUN,GACjBI,MAAMJ,M,oCCjBV,W,kGCCOO,GAAG,kBAAkBC,MAAM,W,EAC9B,eAAc,UAAV,SAAK,G,EACT,eAMI,U,eAND,uFAEa,eAAmB,YAAb,U,eAAa,oBACjC,eAEI,KAFDC,KAAK,4FAA4FC,OAAO,UAAS,e,eAEhH,Q,KAIJ,eAAoC,OAA/BF,MAAM,oBAAkB,S,GACxBA,MAAM,c,GACDA,MAAM,mB,EACZ,eAAmD,KAAhDA,MAAM,oBAAmB,uBAAmB,G,GAGxCA,MAAM,mB,EAEb,eAEI,SAFD,0DAEH,G,GACKA,MAAM,S,EACP,eAAoD,SAA7CA,MAAM,QAAQG,IAAI,YAAW,YAAQ,G,GACvCH,MAAM,W,GAIVA,MAAM,S,EACP,eAAuD,SAAhDA,MAAM,QAAQG,IAAI,YAAW,eAAW,G,GAC1CH,MAAM,W,GAIVA,MAAM,S,EACP,eAA4E,SAArEA,MAAM,QAAQG,IAAI,yBAAwB,uBAAmB,G,GAC/DH,MAAM,W,GAGRA,MAAM,kB,GAMPA,MAAM,mB,EACZ,eAAsF,UAA9EA,MAAM,oBAAoBI,KAAK,SAASC,KAAK,WAAU,kBAAc,G,GAM9EL,MAAM,mB,GACFA,MAAM,oB,EACX,eAOQ,cANN,eAKK,WAJH,eAAiB,UAAb,YACJ,eAAgB,UAAZ,WACJ,eAAiB,UAAb,YACJ,eAAgB,UAAZ,e,mBAcE,eAAkC,KAA/BA,MAAM,sBAAoB,S,GAA7B,G,gBAOA,eAAmC,KAAhCA,MAAM,uBAAqB,S,GAA9B,G,gDAhFhB,eAuFM,MAvFN,EAuFM,CAtFJ,EACA,EAOA,eAA2F,UAAnFA,MAAM,qCAAsC,QAAK,+BAAE,EAAAM,aAAW,KAAS,OAC/E,eAwCM,OAxCDN,MAAK,gBAAC,QAAO,aAAwB,EAAAM,gB,CACxC,EACA,eAqCM,MArCN,EAqCM,CApCJ,eAGS,SAHT,EAGS,CAFP,EACA,eAAuE,UAA/DN,MAAM,SAASO,aAAW,QAAS,QAAK,+BAAE,EAAAC,iBAEpD,eA2BU,UA3BV,EA2BU,CA1BR,eAyBO,QAzBA,SAAM,+CAAU,EAAAC,YAAO,cAAIT,MAAM,MAAMD,GAAG,W,CACjD,EAGA,eAKM,MALN,EAKM,CAJF,EACA,eAEM,MAFN,EAEM,C,eADJ,eAA2D,SAApDC,MAAM,QAAQD,GAAG,W,qDAAoB,EAAAW,YAAW,K,mBAAX,EAAAA,mBAGlD,eAKM,MALN,EAKM,CAJF,EACA,eAEM,MAFN,EAEM,C,eADJ,eAA0E,SAAnEV,MAAM,QAAQI,KAAK,WAAWL,GAAG,W,qDAAoB,EAAAY,YAAW,K,mBAAX,EAAAA,mBAGlE,eAQM,MARN,EAQM,CAPF,EACA,eAEM,MAFN,EAEM,C,eADJ,eAAoG,SAA7FX,MAAM,QAAQI,KAAK,WAAWL,GAAG,wB,qDAAiC,EAAAa,wBAAuB,K,mBAAvB,EAAAA,6B,eAE3E,eAEI,IAFJ,EAAwD,6BAExD,M,QAFkC,EAAAC,2B,MAMxC,eAGS,SAHT,EAGS,CAFP,EACA,eAA0D,UAAlDb,MAAM,SAAU,QAAK,+BAAE,EAAAQ,cAAY,e,GAKjD,eAkCM,MAlCN,EAkCM,CAjCJ,eAgCQ,QAhCR,EAgCQ,CA/BN,EAQA,eAsBQ,e,mBArBN,eAoBK,2BApBc,EAAAM,OAAK,SAAbC,G,wBAAX,eAoBK,MApBsBC,IAAKD,EAAKE,U,CACnC,eAA4B,yBAArBF,EAAKE,UAAQ,GACpB,eAAyD,6BAA9CC,KAAKH,EAAKI,YAAYC,kBAAc,GAC/C,eAA0D,6BAA/CF,KAAKH,EAAKM,aAAaD,kBAAc,GAChD,eAeK,WAdH,eAMS,UALPpB,MAAM,yBACL,QAAK,mBAAE,EAAAsB,eAAeP,EAAKE,WAC5BM,MAAM,sB,OAIR,eAMS,UALPvB,MAAM,wBACL,QAAK,mBAAE,EAAAwB,WAAWT,EAAKE,WACxBM,MAAM,uB,yEAgBP,GACbhC,KADa,WAEX,MAAO,CACLmB,YAAa,GACbC,YAAa,GACbC,wBAAyB,GACzBN,aAAa,EACbQ,MAAO,KAIXW,SAAU,CACRZ,qBADQ,WAEN,OAAOpB,KAAKkB,aAAelB,KAAKmB,0BAIpCc,QAAS,CACPC,SADO,WAELC,EAAA,KAAKC,IAAI,UACNC,KAAKrC,KAAKsC,WACVC,MAAMC,EAAA,KAAc7C,gBAEzB2C,UANO,SAMIzC,GACTG,KAAKqB,MAAQxB,EAASC,KAAKuB,OAE7BN,SATO,WAULf,KAAKa,aAAc,EACnBb,KAAKiB,YAAc,GACnBjB,KAAKkB,YAAc,GACnBlB,KAAKmB,wBAA0B,IAEjCH,QAfO,WAgBChB,KAAKoB,sBACTe,EAAA,KAAKM,IAAI,SAAU,CACjBjB,SAAUxB,KAAKiB,YACfyB,SAAU1C,KAAKkB,cAEdmB,KAAKrC,KAAKe,UACVsB,KAAKrC,KAAKkC,UACVK,MAAMC,EAAA,KAAc7C,gBAG3BkC,eA1BO,SA0BQL,GACb,IAAImB,EAAOC,OAAO,sCAAD,OAAuCpB,IACxD,GAAImB,EAAM,CACR,IAAI,EAAUC,OAAO,kBAAD,OAAmBpB,EAAnB,uBAChB,IACE,GAAWmB,EACbR,EAAA,KAAKU,KAAL,iBAAoBrB,GAAY,CAC9BkB,SAAUC,IAEXN,KAAKG,EAAA,KAAcpC,gBAAgB,wBACnCmC,MAAMC,EAAA,KAAc7C,eAErB6C,EAAA,KAAc5C,MAAM,iCAK5BmC,WA3CO,SA2CIP,GACNsB,QAAQ,iBAAD,OAAkBtB,EAAlB,wDACRW,EAAA,KAAKY,OAAO,UAAUvB,GACnBa,KAAKrC,KAAKkC,UACVK,MAAMC,EAAA,KAAc7C,iBAI7BqD,QApEa,WAqEXhD,KAAKkC,a,UC/JT,EAAOe,OAASA,EAChB,EAAOC,UAAY,kBAEJ,gB","file":"js/users.3e3bfbeb.js","sourcesContent":["export default {\n  error_handler: function (error) {\n    if (error.response && error.response.data.message) {\n      this.error(error.response.data.message);\n    } else {\n      console.log(error);\n    }\n  },\n  error: function (message) {\n    alert(message);\n  },\n  success_handler: function (message) {\n    return function() {\n      alert(message);\n    };\n  },\n  success: function (message) {\n    alert(message);\n  },\n}\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Users.vue?vue&type=style&index=0&id=65266e4f&scoped=true&lang=css\"","<template>\n  <div id=\"playout_history\" class=\"content\">\n    <h1>Users</h1>\n    <p>\n      From here you can edit usernames and passwords that will be allowed\n      to stream, if <code>harbor</code> authentication\n      <a href=\"https://showergel.readthedocs.io/en/latest/liquidsoap.html#authenticating-users-on-harbor\" target=\"_blank\">\n        is set up\n      </a>.\n    </p>\n    <button class=\"button block is-primary is-rounded\" @click=\"showUserAdd = true\">Add</button>\n    <div class=\"modal\" :class=\"{ 'is-active': showUserAdd }\">\n      <div class=\"modal-background\"></div>\n      <div class=\"modal-card\">\n        <header class=\"modal-card-head\">\n          <p class=\"modal-card-title\">Create user account</p>\n          <button class=\"delete\" aria-label=\"close\" @click=\"resetAdd()\"></button>\n        </header>\n        <section class=\"modal-card-body\">\n          <form @submit.prevent=\"addUser()\" class=\"box\" id=\"addUser\">\n          <p>\n            Avoid special characters (even spaces) in usernames.\n          </p>\n          <div class=\"field\">\n              <label class=\"label\" for=\"username\">Username</label>\n              <div class=\"control\">\n                <input class=\"input\" id=\"username\" v-model=\"addUsername\" />\n              </div>\n          </div>\n          <div class=\"field\">\n              <label class=\"label\" for=\"password\">Pass phrase</label>\n              <div class=\"control\">\n                <input class=\"input\" type=\"password\" id=\"password\" v-model=\"addPassword\"/>\n              </div>\n          </div>\n          <div class=\"field\">\n              <label class=\"label\" for=\"password_confirmation\">Confirm pass phrase</label>\n              <div class=\"control\">\n                <input class=\"input\" type=\"password\" id=\"password_confirmation\" v-model=\"addPasswordConfirmation\" />\n              </div>\n              <p class=\"help is-danger\" v-show=\"addPasswordsMismatch\">\n                Pass phrases don't match\n              </p>\n          </div>\n          </form>\n        </section>\n        <footer class=\"modal-card-foot\">\n          <button class=\"button is-success\" type=\"submit\" form=\"addUser\">Create account</button>\n          <button class=\"button\" @click=\"resetAdd()\">Cancel</button>\n        </footer>\n      </div>\n    </div>\n\n    <div class=\"table-container\">\n      <table class=\"table is-striped\">\n        <thead>\n          <tr>\n            <th>Username</th>\n            <th>Created</th>\n            <th>Modified</th>\n            <th>Actions</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for=\"user in users\" :key=\"user.username\">\n            <td>{{ user.username }}</td>\n            <td>{{ new Date(user.created_at).toLocaleString() }}</td>\n            <td>{{ new Date(user.modified_at).toLocaleString() }}</td>\n            <td>\n              <button\n                class=\"button is-warning icon\"\n                @click=\"changePassword(user.username)\"\n                title=\"Change pass phrase\"\n                >\n                  <i class=\"mdi mdi-lock-reset\"></i>\n              </button>\n              <button\n                class=\"button is-danger icon\"\n                @click=\"deleteUser(user.username)\"\n                title=\"Remove user account\"\n                >\n                  <i class=\"mdi mdi-account-off\"></i>\n              </button>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n</template>\n\n<script>\nimport http from '@/http';\nimport notifications from '@/notifications';\n\nexport default {\n  data () {\n    return {\n      addUsername: '',\n      addPassword: '',\n      addPasswordConfirmation: '',\n      showUserAdd: false,\n      users: []\n    }\n  },\n\n  computed: {\n    addPasswordsMismatch() {\n      return this.addPassword != this.addPasswordConfirmation;\n    }\n  },\n\n  methods: {\n    getUsers () {\n      http.get('/users')\n        .then(this.onResults)\n        .catch(notifications.error_handler);\n    },\n    onResults (response) {\n      this.users = response.data.users;\n    },\n    resetAdd () {\n      this.showUserAdd = false;\n      this.addUsername = '';\n      this.addPassword = '';\n      this.addPasswordConfirmation = '';\n    },\n    addUser () {\n      if (! this.addPasswordsMismatch) {\n        http.put('/users', {\n          username: this.addUsername,\n          password: this.addPassword,\n        })\n          .then(this.resetAdd)\n          .then(this.getUsers)\n          .catch(notifications.error_handler);\n      }\n    },\n    changePassword(username) {\n      let pass = prompt(`Please enter a new pass phrase for ${username}`);\n      if (pass) {\n        let confirm = prompt(`Please confirm ${username}'s new pass phrase`);\n        if (confirm) {\n          if (confirm == pass) {\n            http.post(`/users/${username}`, {\n              password: pass,\n            })\n            .then(notifications.success_handler(\"Pass phrase updated\"))\n            .catch(notifications.error_handler);\n          } else {\n            notifications.error(\"Pass phrases don't match !\");\n          }\n        }\n      }\n    },\n    deleteUser(username) {\n      if(confirm(`Really remove ${username}'s account ? All related data will be removed too.`)) {\n        http.delete('/users/'+username)\n          .then(this.getUsers)\n          .catch(notifications.error_handler);\n      }\n    }\n  },\n  mounted () {\n    this.getUsers();\n  }\n}\n</script>\n\n<style scoped>\n#showUserAdd {\n    cursor: pointer;\n}\n</style>\n","import { render } from \"./Users.vue?vue&type=template&id=65266e4f&scoped=true\"\nimport script from \"./Users.vue?vue&type=script&lang=js\"\nexport * from \"./Users.vue?vue&type=script&lang=js\"\n\nimport \"./Users.vue?vue&type=style&index=0&id=65266e4f&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-65266e4f\"\n\nexport default script"],"sourceRoot":""}